<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì—…ìš© AI ì±—ë´‡ í”Œë«í¼ ê°œë°œ - ì¬ì˜ì˜ ë¸”ë¡œê·¸</title>
    <meta name="description" content="GPT-4 ê¸°ë°˜ ì§€ëŠ¥í˜• ê³ ê° ìƒë‹´ ì±—ë´‡ ì‹œìŠ¤í…œ êµ¬ì¶•">
    <link rel="stylesheet" href="/portfolio/assets/style.css">
    <link rel="alternate" type="application/rss+xml" title="ì¬ì˜ì˜ ë¸”ë¡œê·¸ RSS" href="/portfolio/ko/feed.xml">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <script>
        // Apply saved theme immediately to prevent flash
        const theme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', theme);
        // Language preference
        const lang = localStorage.getItem('lang') || 'ko';
    </script>
    <script src="/portfolio/assets/js/theme-switcher.js" defer></script>
</head>
<body>
    <header>
        <nav>
            <a href="/portfolio/ko/" class="site-title" data-nav-link>ì¬ì˜ì˜ ë¸”ë¡œê·¸</a>
            <div class="nav-links">
                <a href="/portfolio/ko/" data-nav-link>í™ˆ</a>
                <a href="/portfolio/ko/categories.html" data-nav-link>ì¹´í…Œê³ ë¦¬</a>
                <a href="/portfolio/ko/tags.html" data-nav-link>íƒœê·¸</a>
                <a href="/portfolio/ko/archive.html" data-nav-link>ì•„ì¹´ì´ë¸Œ</a>
                <a href="/portfolio/ko/about.html" data-nav-link>ì†Œê°œ</a>
                <select id="lang-select" aria-label="Select language" style="background: var(--bg-primary); border: 1px solid var(--border); border-radius: 4px; padding: 4px 8px; color: var(--text-primary); cursor: pointer; font-size: 0.9rem; margin-right: 0.5rem;">
                    <option value="en">English</option>
                    <option value="ko">í•œêµ­ì–´</option>
                </select>
                <button id="theme-toggle" aria-label="ë‹¤í¬ ëª¨ë“œ ì „í™˜" style="background: none; border: none; cursor: pointer; color: var(--text-secondary); font-size: 1.2rem;">
                    <span id="theme-icon">ğŸŒ™</span>
                </button>
            </div>
        </nav>
    </header>

    <main>
        <article class="post">
    <header class="post-header">
        <h1>ê¸°ì—…ìš© AI ì±—ë´‡ í”Œë«í¼ ê°œë°œ</h1>
        <time datetime=""2025-10-06T00:00:00.000Z"">October 6, 2025</time>
        
        <div style="margin-top: 1rem;">
            <a href="/portfolio/ko/categories/projects.html" class="category-badge">projects</a>
        </div>
        
        
        <div class="tags" style="margin-top: 1rem;">
            
            <a href="/portfolio/ko/tags/ai.html" class="tag">ai</a>
            
            <a href="/portfolio/ko/tags/chatgpt.html" class="tag">chatgpt</a>
            
            <a href="/portfolio/ko/tags/python.html" class="tag">python</a>
            
            <a href="/portfolio/ko/tags/fastapi.html" class="tag">fastapi</a>
            
            <a href="/portfolio/ko/tags/ì±—ë´‡.html" class="tag">ì±—ë´‡</a>
            
            <a href="/portfolio/ko/tags/nlp.html" class="tag">nlp</a>
            
        </div>
        
    </header>

    <div class="post-content">
        <h1 id="-ai-">ê¸°ì—…ìš© AI ì±—ë´‡ í”Œë«í¼ ê°œë°œ</h1>
<h2 id="-">í”„ë¡œì íŠ¸ ì†Œê°œ</h2>
<h3>ê°œìš”</h3>
<p>ê³ ê° ì„œë¹„ìŠ¤ íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•œ AI ê¸°ë°˜ ëŒ€í™”í˜• ì±—ë´‡ í”Œë«í¼ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤. GPT-4 APIë¥¼ í™œìš©í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”ê°€ ê°€ëŠ¥í•˜ë©°, ê¸°ì—…ë³„ ë§ì¶¤ ì„¤ì •ì´ ê°€ëŠ¥í•œ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.</p>
<h3 id="-">ì£¼ìš” íŠ¹ì§•</h3>
<ul class="ul-list">
<li>ë‹¤êµ­ì–´ ì§€ì› (í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´)</li><li>ì‹¤ì‹œê°„ ìƒë‹´ì› ì „í™˜</li><li>ê°ì • ë¶„ì„ ë° ìš°ì„ ìˆœìœ„ ì²˜ë¦¬</li><li>í†µê³„ ëŒ€ì‹œë³´ë“œ</li><li>í•™ìŠµ ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ</li></ul>
<h3 id="-">ê°œë°œ ê¸°ê°„</h3>
<p>2024ë…„ 6ì›” - 2024ë…„ 12ì›” (6ê°œì›”)</p>
<h2 id="-">ê¸°ìˆ  ìŠ¤íƒ</h2>
<h3 id="backend">Backend</h3>
<pre><code class="language-python"># ì£¼ìš” ê¸°ìˆ 
- Python 3.11
- FastAPI
- LangChain
- OpenAI GPT-4 API
- PostgreSQL
- Redis
- Celery</code></pre>
<h3 id="frontend">Frontend</h3>
<pre><code class="language-javascript"><span class="comment">// ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</span>
- React <span class="number">18</span>
- TypeScript
- Material-UI
- Chart.js
- Socket.io</code></pre>
<h3 id="infrastructure">Infrastructure</h3>
<ul class="ul-list">
<li>Docker &amp; Kubernetes</li><li>AWS EKS</li><li>MongoDB (ëŒ€í™” ë¡œê·¸)</li><li>Elasticsearch (ê²€ìƒ‰)</li></ul>
<h2 id="-">ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h2>
<pre><code class="language-mermaid">graph TB
    User[ì‚¬ìš©ì] --&gt; Widget[ì±—ë´‡ ìœ„ì ¯]
    Widget --&gt; Gateway[API Gateway]
    Gateway --&gt; ChatService[ëŒ€í™” ì„œë¹„ìŠ¤]
    ChatService --&gt; GPT[GPT-4 API]
    ChatService --&gt; Context[ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬]
    Context --&gt; VectorDB[Vector DB]
    ChatService --&gt; Analytics[ë¶„ì„ ì—”ì§„]
    Analytics --&gt; Dashboard[ëŒ€ì‹œë³´ë“œ]</code></pre>
<h2 id="-">í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„</h2>
<h3 id="1-">1. ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ</h3>
<pre><code class="language-python">from langchain.memory import ConversationBufferWindowMemory
from langchain.vectorstores import Pinecone
import pinecone

class ContextManager:
    def __init__(self, session_id: str):
        self.session_id = session_id
        self.memory = ConversationBufferWindowMemory(
            k=10,  # ìµœê·¼ 10ê°œ ëŒ€í™” ìœ ì§€
            return_messages=True
        )
        self.vector_store = self._init_vector_store()

    def _init_vector_store(self):
        pinecone.init(
            api_key=PINECONE_API_KEY,
            environment=&quot;asia-southeast1-gcp&quot;
        )
        return Pinecone.from_existing_index(
            index_name=&quot;chatbot-knowledge&quot;,
            embedding=OpenAIEmbeddings()
        )

    async def get_relevant_context(self, query: str):
        # ë²¡í„° ê²€ìƒ‰ìœ¼ë¡œ ê´€ë ¨ ë¬¸ì„œ ì°¾ê¸°
        docs = await self.vector_store.similarity_search(
            query, k=5
        )

        # ëŒ€í™” ê¸°ë¡ê³¼ ê²°í•©
        chat_history = self.memory.chat_memory.messages

        return {
            &quot;documents&quot;: docs,
            &quot;chat_history&quot;: chat_history
        }</code></pre>
<h3 id="2-">2. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§</h3>
<pre><code class="language-python">class PromptTemplate:
    def __init__(self, company_profile):
        self.company = company_profile
        self.system_prompt = f&quot;&quot;&quot;
        ë‹¹ì‹ ì€ {self.company[&#39;name&#39;]}ì˜ ê³ ê° ì„œë¹„ìŠ¤ ìƒë‹´ì›ì…ë‹ˆë‹¤.

        íšŒì‚¬ ì •ë³´:
        - ì—…ì¢…: {self.company[&#39;industry&#39;]}
        - ì£¼ìš” ì„œë¹„ìŠ¤: {&#39;, &#39;.join(self.company[&#39;services&#39;])}

        ëŒ€í™” ì›ì¹™:
        1. í•­ìƒ ì¹œì ˆí•˜ê³  ì „ë¬¸ì ìœ¼ë¡œ ì‘ëŒ€
        2. íšŒì‚¬ ì •ì±…ê³¼ ì¼ì¹˜í•˜ëŠ” ë‹µë³€ ì œê³µ
        3. ë¶ˆí™•ì‹¤í•œ ê²½ìš° ìƒë‹´ì› ì—°ê²° ì œì•ˆ
        4. ê°œì¸ì •ë³´ ë³´í˜¸ ì¤€ìˆ˜
        &quot;&quot;&quot;

    def create_chat_prompt(self, user_input, context):
        return f&quot;&quot;&quot;
        {self.system_prompt}

        ê´€ë ¨ ë¬¸ì„œ:
        {context[&#39;documents&#39;]}

        ëŒ€í™” ê¸°ë¡:
        {context[&#39;chat_history&#39;]}

        ê³ ê° ì§ˆë¬¸: {user_input}

        ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì ì ˆí•œ ë‹µë³€ì„ ì œê³µí•˜ì„¸ìš”.
        &quot;&quot;&quot;</code></pre>
<h3 id="3-">3. ì‹¤ì‹œê°„ ê°ì • ë¶„ì„</h3>
<pre><code class="language-python">from transformers import pipeline

class EmotionAnalyzer:
    def __init__(self):
        self.classifier = pipeline(
            &quot;sentiment-analysis&quot;,
            model=&quot;nlptown/bert-base-multilingual-uncased-sentiment&quot;
        )

    def analyze(self, text: str):
        result = self.classifier(text)[0]

        emotion_map = {
            &quot;1 star&quot;: &quot;very_negative&quot;,
            &quot;2 stars&quot;: &quot;negative&quot;,
            &quot;3 stars&quot;: &quot;neutral&quot;,
            &quot;4 stars&quot;: &quot;positive&quot;,
            &quot;5 stars&quot;: &quot;very_positive&quot;
        }

        emotion = emotion_map.get(result[&#39;label&#39;], &#39;neutral&#39;)
        confidence = result[&#39;score&#39;]

        # ë¶€ì •ì  ê°ì • ì‹œ ì•Œë¦¼
        if emotion in [&#39;very_negative&#39;, &#39;negative&#39;]:
            self.escalate_to_human(text, emotion)

        return {
            &quot;emotion&quot;: emotion,
            &quot;confidence&quot;: confidence,
            &quot;priority&quot;: self.calculate_priority(emotion, confidence)
        }

    def calculate_priority(self, emotion, confidence):
        if emotion == &#39;very_negative&#39; and confidence &gt; 0.8:
            return &quot;high&quot;
        elif emotion == &#39;negative&#39;:
            return &quot;medium&quot;
        return &quot;low&quot;</code></pre>
<h3 id="4-">4. ë‹¤êµ­ì–´ ì²˜ë¦¬</h3>
<pre><code class="language-python">from googletrans import Translator
import langdetect

class MultilingualHandler:
    def __init__(self):
        self.translator = Translator()
        self.supported_langs = [&#39;ko&#39;, &#39;en&#39;, &#39;ja&#39;, &#39;zh-cn&#39;]

    async def process(self, text: str):
        # ì–¸ì–´ ê°ì§€
        detected_lang = langdetect.detect(text)

        if detected_lang not in self.supported_langs:
            detected_lang = &#39;en&#39;

        # ì˜ì–´ë¡œ ë²ˆì—­ (GPT ì²˜ë¦¬ìš©)
        if detected_lang != &#39;en&#39;:
            translated = self.translator.translate(
                text,
                src=detected_lang,
                dest=&#39;en&#39;
            )
            text_for_gpt = translated.text
        else:
            text_for_gpt = text

        # GPT ì‘ë‹µ ë°›ê¸°
        response = await self.get_gpt_response(text_for_gpt)

        # ì›ë˜ ì–¸ì–´ë¡œ ë²ˆì—­
        if detected_lang != &#39;en&#39;:
            final_response = self.translator.translate(
                response,
                src=&#39;en&#39;,
                dest=detected_lang
            )
            return final_response.text

        return response</code></pre>
<h3 id="5-">5. ì„±ëŠ¥ ìµœì í™”</h3>
<pre><code class="language-python">import asyncio
from functools import lru_cache
import hashlib

class ResponseCache:
    def __init__(self):
        self.redis_client = redis.Redis(
            host=&#39;localhost&#39;,
            port=6379,
            decode_responses=True
        )

    def get_cache_key(self, query: str, context: dict):
        # ì¿¼ë¦¬ì™€ ì»¨í…ìŠ¤íŠ¸ë¥¼ í•´ì‹œí™”
        content = f&quot;{query}{str(context)}&quot;
        return hashlib.md5(content.encode()).hexdigest()

    async def get_response(self, query: str, context: dict):
        cache_key = self.get_cache_key(query, context)

        # ìºì‹œ í™•ì¸
        cached = self.redis_client.get(cache_key)
        if cached:
            return json.loads(cached)

        # GPT í˜¸ì¶œ
        response = await self.call_gpt(query, context)

        # ìºì‹œ ì €ì¥ (1ì‹œê°„ TTL)
        self.redis_client.setex(
            cache_key,
            3600,
            json.dumps(response)
        )

        return response</code></pre>
<h2 id="-">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>
<h3 id="-">ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h3>
<pre><code class="language-javascript"><span class="comment">// React ì»´í¬ë„ŒíŠ¸</span>
<span class=<span class="string">"keyword"</span>>const</span> DashboardMetrics = () =&gt; {
  <span class=<span class="string">"keyword"</span>>const</span> [metrics, setMetrics] = useState({
    activeUsers: <span class="number">0</span>,
    totalConversations: <span class="number">0</span>,
    avgResponseTime: <span class="number">0</span>,
    satisfactionRate: <span class="number">0</span>
  });

  useEffect(() =&gt; {
    <span class=<span class="string">"keyword"</span>>const</span> socket = io(&#<span class="number">39</span>;ws:<span class="comment">//localhost:<span class="number">8000</span>&#<span class="number">39</span>;);</span>

    socket.on(&#<span class="number">39</span>;metrics_update&#<span class="number">39</span>;, (data) =&gt; {
      setMetrics(data);
    });

    <span class=<span class="string">"keyword"</span>>return</span> () =&gt; socket.disconnect();
  }, []);

  <span class=<span class="string">"keyword"</span>>return</span> (
    &lt;Grid container spacing={<span class="number">3</span>}&gt;
      &lt;Grid item xs={<span class="number">3</span>}&gt;
        &lt;MetricCard
          title=&quot;í™œì„± ì‚¬ìš©ì&quot;
          value={metrics.activeUsers}
          icon={&lt;PeopleIcon /&gt;}
        /&gt;
      &lt;/Grid&gt;
      {/* ì¶”ê°€ ë©”íŠ¸ë¦­ ì¹´ë“œë“¤ */}
    &lt;/Grid&gt;
  );
};</code></pre>
<h2 id="-">í•™ìŠµ ë°ì´í„° ê´€ë¦¬</h2>
<h3 id="fine-tuning-">Fine-tuning ë°ì´í„° ì¤€ë¹„</h3>
<pre><code class="language-python">class TrainingDataManager:
    def __init__(self):
        self.db = PostgreSQL()

    def prepare_training_data(self):
        # ìš°ìˆ˜ ëŒ€í™” ì¶”ì¶œ
        good_conversations = self.db.query(&quot;&quot;&quot;
            SELECT user_input, bot_response, rating
            FROM conversations
            WHERE rating &gt;= 4
            AND reviewed = true
            ORDER BY created_at DESC
            LIMIT 10000
        &quot;&quot;&quot;)

        # JSONL í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        training_data = []
        for conv in good_conversations:
            training_data.append({
                &quot;messages&quot;: [
                    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: conv.user_input},
                    {&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: conv.bot_response}
                ]
            })

        # Fine-tuning ë°ì´í„° ì €ì¥
        with open(&#39;training_data.jsonl&#39;, &#39;w&#39;) as f:
            for item in training_data:
                f.write(json.dumps(item) + &#39;\n&#39;)

        return len(training_data)</code></pre>
<h2 id="-">ì„±ê³¼ ë° ì§€í‘œ</h2>
<h3 id="-">ì •ëŸ‰ì  ì„±ê³¼</h3>
<ul class="ul-list">
<li><strong>ì‘ë‹µ ì‹œê°„</strong>: í‰ê·  1.2ì´ˆ (ëª©í‘œ: 2ì´ˆ ì´ë‚´)</li><li><strong>ì •í™•ë„</strong>: 89% (ì¸ê°„ ê²€ì¦ ê¸°ì¤€)</li><li><strong>ì²˜ë¦¬ëŸ‰</strong>: ì¼ í‰ê·  10,000ê±´ ëŒ€í™”</li><li><strong>ë¹„ìš© ì ˆê°</strong>: ìƒë‹´ ì¸ë ¥ 40% ê°ì†Œ</li></ul>
<h3 id="-">ì •ì„±ì  ì„±ê³¼</h3>
<ul class="ul-list">
<li>24/7 ìƒë‹´ ê°€ëŠ¥</li><li>ë‹¤êµ­ì–´ ê³ ê° ì§€ì›</li><li>ì¼ê´€ëœ ì„œë¹„ìŠ¤ í’ˆì§ˆ</li><li>ìƒë‹´ì› ì—…ë¬´ ë¶€ë‹´ ê°ì†Œ</li></ul>
<h2 id="-">ë„ì „ ê³¼ì œì™€ í•´ê²°</h2>
<h3 id="1-">1. í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€</h3>
<p><strong></strong>: GPTê°€ ì—†ëŠ” ì •ë³´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” í˜„ìƒ</p>
<p><strong></strong>:</p>
<ul class="ul-list">
<li>RAG (Retrieval-Augmented Generation) êµ¬í˜„</li><li>ì‹ ë¢°ë„ ì ìˆ˜ ê¸°ë°˜ í•„í„°ë§</li><li>íŒ©íŠ¸ ì²´í¬ ë ˆì´ì–´ ì¶”ê°€</li></ul>
<h3 id="2-">2. ì‘ë‹µ ì§€ì—°</h3>
<p><strong></strong>: GPT API í˜¸ì¶œ ì‹œ ì§€ì—°</p>
<p><strong></strong>:</p>
<ul class="ul-list">
<li>ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ êµ¬í˜„</li><li>ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì§ˆë¬¸ ìºì‹±</li><li>ë¹„ë™ê¸° ì²˜ë¦¬ ìµœì í™”</li></ul>
<h3 id="3-">3. ë¹„ìš© ìµœì í™”</h3>
<p><strong></strong>: API ì‚¬ìš©ë£Œ ì¦ê°€</p>
<p><strong></strong>:</p>
<ul class="ul-list">
<li>í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”</li><li>ìºì‹± ì „ëµ ê°œì„ </li><li>GPT-3.5ì™€ GPT-4 í•˜ì´ë¸Œë¦¬ë“œ ì‚¬ìš©</li></ul>
<h2 id="-">í–¥í›„ ê³„íš</h2>
<ol class="ol-list">
<li><strong>ìŒì„± ì¸í„°í˜ì´ìŠ¤</strong> ì¶”ê°€</li><li><strong>ê°ì • ê¸°ë°˜ ì‘ë‹µ</strong> ê³ ë„í™”</li><li><strong>ìì²´ LLM ëª¨ë¸</strong> ê°œë°œ</li><li><strong>í”„ë¡œì•¡í‹°ë¸Œ ìƒë‹´</strong> ê¸°ëŠ¥</li></ol>
<h2 id="-">ì½”ë“œ ì €ì¥ì†Œ</h2>
<ul class="ul-list">
<li><a href="#">GitHub Repository</a> (Private)</li><li><a href="#">API Documentation</a></li><li><a href="#">Demo Video</a></li></ul>
<h2>ë§ˆì¹˜ë©°</h2>
<p>ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ LLMì„ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì ìš©í•˜ëŠ” ê²½í—˜ì„ ì–»ì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ê³¼ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ì˜ ì¤‘ìš”ì„±ì„ ê¹Šì´ ì´í•´í•˜ê²Œ ë˜ì—ˆìœ¼ë©°, AIì™€ ì¸ê°„ì˜ í˜‘ì—… ëª¨ë¸ì— ëŒ€í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

    </div>

    <nav class="post-nav">
        
        
        <a href="/portfolio/ko/posts/2025-10-06-ecommerce-platform.html" class="next">ëŒ€ê·œëª¨ ì´ì»¤ë¨¸ìŠ¤ í”Œë«í¼ êµ¬ì¶• í”„ë¡œì íŠ¸ â†’</a>
        
    </nav>
</article>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; Jae Â· Built with custom static site generator</p>
            <div class="footer-links">
                <a href="/portfolio/ko/feed.xml">RSS</a>
                
                
            </div>
        </div>
    </footer>

    <script>
        // Parse current URL to get blog and language
        const pathParts = window.location.pathname.split('/').filter(p => p);
        const blogPath = pathParts[0] ? '/' + pathParts[0] : '';
        const currentLang = pathParts[1] || 'en';

        // Update navigation links - they should already be correct from server
        // This is just for dynamic client-side updates if needed
        function updateNavLinks() {
            const navLinks = document.querySelectorAll('[data-nav-link]');
            // Links are already fixed by the server, no client-side processing needed
        }

        // Theme toggle functionality
        const toggleBtn = document.getElementById('theme-toggle');
        const icon = document.getElementById('theme-icon');

        function updateThemeIcon(theme) {
            icon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        updateThemeIcon(localStorage.getItem('theme') || 'light');

        toggleBtn?.addEventListener('click', () => {
            const current = document.documentElement.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            updateThemeIcon(next);
        });

        // Language dropdown functionality
        const langSelect = document.getElementById('lang-select');
        if (langSelect) {
            // Set current language in dropdown
            langSelect.value = currentLang;

            langSelect.addEventListener('change', (e) => {
                const selectedLang = e.target.value;
                localStorage.setItem('lang', selectedLang);

                // Simply replace the language code in the current path
                const newPath = window.location.pathname.replace(
                    /\/[a-z]{2}\//,
                    '/' + selectedLang + '/'
                );

                window.location.href = newPath;
            });
        }
    </script>
</body>
</html>